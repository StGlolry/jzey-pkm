


** Glory_Daily
*** 2015.1.5
**** keep research mingw crosscompile 2h
***** items
+ TlHelp32.h should be tlhelp32.h on linux crosscompile
**** use linux & mingw & c write shellcode 2h
**** setup the rtmfp & pcre environment for bug hunting 2h


*** 2015.2.2
**** Read company-clang code && dig into company mode for details (4h)
**** reverse a class in mshtml (3h)
**** c && c++ socket programing (4h)
**** brain excersize (1h)


*** 2015.2.4

**** review a class in mshtml (CHTMLCtxStream)

**** make google earth on linux work

**** think about c++ programing

**** kernel debug on linux

**** reverse a pe file protected by vmp

**** windows symbolic link (foler && register && files)

**** read the article MJ post on blog.360.cn about Font

**** read the pdf about all road lead to system depends on service
+ dir /a command
+ cacls icacls
+ wmic service list config
+ sc qc

**** windows object management

**** collect informations on github , twitter ,weibo


*** 2015.2.5
+ vmp research
  + stack-based virtual machine
  + vmp handler
  + VMP instrument classify
+ c++ thinking
+ windows font engine in win10 (MJ0011)
+ TreadStone
+ TRY TO ABUSE THE DISASSEBLER
+ linux wifi commandline
  使用iwconfig命令：
  搜索无线网 iwlist wlan0 scan
  记下essid
  连接无密码的无线网 iwconfig wlan0 essid ChinaNet　其中ChinaNet是搜索到的无线网essid
  连接有密码的无线网 iwconfig wlan0 essid ChinaNet key xxxx　其中xxxx是密码
  启用无线网卡 ifconfig wlan0 up
  通过dhcp获取IP　dhclient wlan0　或 dhcpcd wlan0

  
*** 2015.2.6 (need more efficiency...)
+ brain and body excersize  (1h)
+ vmp research (2h)
+ review 1 class in mshtml
+ think about c++ programing
+ shellcode interact with host program
+ WINDOWS10 FONT ENGINE
+ WINDOWS10 CFG
  

** Glory_ideas 自律
*** most important abilities for work
+ programing
+ reverse engineering
+ debugging
+ code reading
+ experience ( deep understanding the platform of system or language)

  
*** life
+ what do you really care ?
+ in those areas , you must do the best. for others , have fun.


** Glory_Android


** Glory_Browser


** Glory_Emacs
**** 快捷键
+ zm  folder all
+ zo  jump back to  {
+ zh zl  move scree to left or right
+ gub guw
+ r e w


** Glory_Vim


** Glory_WinKernel
*** winobj.exe decription and usage
**** Description
   Deep inside Windows lies a subsystem called the Object Manager 
   that is responsible for tracking every resource in the system.
   “Resources” can be files, Registry entries, hardware devices, running processes 
   -- essentially everything in the system that can be named and addressed.

   The object header includes items such as the object name, so that other processes 
   can reference the object by name, and a security descriptor, so that the object manager
   can control which processes access the system resource.
   The tasks that the object manager performs include the following:
   - Creating objects
   - Verifying that a process has the right to use the object
   - Creating object handles and returning them to the caller
   - Maintaining resource quotas
   - Creating duplicate handles
   - Closing handles to objects
 
**** Q A.
    + Object Manager Namespace
      - http://www.nynaeve.net/?p=61
      - http://windowsitpro.com/systems-management/inside-nts-object-manager
      - http://www.osronline.com/article.cfm?article=381 meandering througout Object Manager


    + Nt Objects
      - http://blogs.ejb.cc/archives/7137/windows-internal-object-and-object-manager

   
*** UAC Bypass Study

**** reference URLS:
+ http://www.greyhathacker.net/?p=796

*** Windows Services
**** Windows Service Control Manager(SCM)
**** icacls cacls
**** wmic service list config  (HKML_SYSTEM_CurrentControlSet_Services)
***** AccessChk tool
***** accesschk.exe -quvcw * > services.txt 
**** Insecure Names Pipes Permissions
*** Windows Graphic Drivers

**** WDDM (windows display driver model)
+ http://blogs.ejb.cc/archives/7039/windows-display-driver-wddm-programming-1 WDDM PROGRAMING

**** 

*** todo items:
+ study windows internals
+ icalcs
  http://technet.microsoft.com/en-us/library/cc753525.aspx
  

** Glory_WinFont


** Glory_IE
*** IE Protect Mode Research
**** some intresting items:
   + Practical Sandbox
   + \SOFTWARE\Microsoft\Internet Explorer\Low Rights\ElevationPolicy\
   + Elevation Policy
   + two diffrent hooking  
     IE Broker Shim
     - iebrshim.dll
     - Redirects process launch requests to broker

     Application Compatibility shims
     - AcLayers.dll
     - AcRedir.dll
     - Redirect registry and file access to low integrity locations 
       
   + Global Atom Table

   + WindowStation \KnowDlls

   + registry symbolic link attack

   + what is unc 路径

   + internet explorer have 5 predifined area
     - 1.internet 2.local intranet 3.trusted sites 4.restricted sites 5.my computer

     - highed privildege area can convert to low priviledge area , like 5->2 , to execute a html locally and there is no script prompt.

     - if the local html is LowIntergrity level , defaut ie treat it as internet area.  open it in sandboxed process...

     - if local html is medium level , can trasfer it to intranet area by  execute it in intranet area , no EPM , no prompt.
       <!-- saved from usr=(0016)http://localhost -->


   + can low right ie modify enviroment of current process or parent process?

**** inter-process communication
***** Shared Memory IPC
***** COM ipc

**** IE Shims(Compatibility Layer)
(provide by ieshims.dll)
***** Known Broker Object
**** Services 
services here refers to any functionality exposed by broker process
which can be called by sandboxed process
***** User Broker Object
ieframe!CIEUserBrokerObject
method exposed by UBO can refer to ieframe!CIEUserBrokerObject::QueryInterface()
***** Known Broker Object
refer to WP_ie10_EPM*.pdf 2.6.2
***** Broker Components Message Handler
those message handle invoked when inter-process message received
via shared memory IPC.
+ ieframe!CBrowserFrame::_Handle*()
+ ieframe!CDownloadManager::HandleDownloadMessage()
**** Elevation Policy
+ check if some registry is dangerous to execute other commands like cmd and rundll32. 
**** Archive Analysis
***** CVE-2014-6322
**** Test Point
***** unproper set settings.
***** inter-process Communitation
***** Serveices
***** process functions which take effect on parent or other process
+ [[http://msdn.microsoft.com/en-us/library/windows/desktop/ms684320%2528v%3Dvs.85%2529.aspx][process related apis]]
*** Small tricks
+ open local file(my computer zone) to interzone && intranet zone
 add <!-- saved from url=(0013)about:internet --> to top of html file , then you can execute js in local computer, but the childprocess is Low Intergrity Level.
 above line is set to be internet zone ,  below is intranet zone
 <!-- saved from url=(0014)about:internet -->
  <!-- saved from usr=(0016)http://localhost -->
*** WHEN CREATE A FILE IN %TEMP%LOW folder , the file's IL is low , then open it in iexplore.exe ,even it open locally , but the process is sandboxed 


** Glory_IOS


** Glory_Linux
*** useful commands
+ rar & unrar zip & unzip tar zxvf & xvf
  http://blog.sina.com.cn/s/blog_667725170100npua.html  rar&unrar

  tar -d ***.lzma
+ find
  find /mnt/hgfs/WDoc -type f find /mnt/hgfs/WDoc -type d

  ## 对找到的所有文件进行批处理

  find . -type f -exec chmod 644 {} \; # 后面的\;必须的，表示按行输出

  find . -type d -exec chmod 755 {} \; # {} 表示找到的文件路径

  in zsh , type find then tab… so convinient.
+ apt-cache search
+ !! extract last command . so sudo !! can execute last command as root
+ alsamixer
+ python -m SimpleHTTPServer
+ mount | column -t
+ man ascii
+ telnet towel.blinkenlights.nl
+ history | awk '{a[$2]++}END{for(i in a){print a[i] " " i}}' | sort -rn | head         : list the command you used most often
+ echo "You can simulate on-screen typing just like in the movies" | pv -qL 10
+ getconf LONG_BIT  : to see your computer is 32bits or 64
+ ps aux | sort -nk +4 | tail  : sort the top ten process by memory usage
+ while sleep 1;do tput sc;tput cup 0 $(($(tput cols)-29));date;tput rc;done &          : put a clock on the terminal corner
+ lsof -i   :  check the network connection in real time
+ ifconfig | convert label:@- ip.png    : save command output to image
+ sudo dd if=/dev/mem | cat | strings   : display all the strings in ram
+ ls -R | grep ":$" | sed -e 's/:$//' -e 's/[^-][^\/]*\//--/g' -e 's/^/   /' -e 's/-/|/'   : display subdirectories in tree form
+ du -s * | sort -n | tail   :  display ten biggest files in current directory 
  

*** GDB
**** commnads
+ set args
+ bt
+ -tui
+ info
+ break


*** Issues
+ googleearth problem
  when installed googleearth , then exec ./googleearch ,  it failed in googleearth-bin not found .   then sudo apt-get install lsb-core   ,, problem solved.


** Glory_ProgramAnalysis

*** pin

**** compile pin tools on windows & linux || b32 & b64
+ windows
  install cygwin , add cygwin to path, cd to pinroot/source/tools/    then make
  - 32bits
    if you use windows 32bits,there will not be any problems just use cygwin32 vsx86command prompt
  - 64bits
    if you want compile 64 bits pin tools , us cygwin64 vsx64command prompt cd to tools folder make
    if you want compile 32 bits pin tools on x64 windows , us vsx86command prompt , then modify pinroot/source/tools/config/win.var TARGET ?= $(HOST_ARCH) this sentence to TARGET := ia32

**** follow to chiled process and attach to pid
+ when use -pid ,it should just next with pin.exe
+ when use -follow-execv , dll should be full path

**** some pin funcs

***** CHILD_PROCESS_SetPinCommandLine

**** PIN Project

***** FunCap
give a poc file or specified progress,extracted all the information in program run time.

+ all the functions executed (or in specified module)
+ function call routine , and caller relativity(which can draw graph in ida)
+ each func parameters type and value
+ all the symbols from pdb
  put the pdb file on pin folder and desktop , then pin can read that.
+ support child process mode


** Glory_CodeAnalysis

+ when reading source code , we should start at one entry or near entry big functional function
  which we already know what it does, then the sub-funs will be more readable and understandable.


** Glory_Flash
*** PCRE
*** RTMFP


** Glory_AdobeReader


** Glory_Reverse
*** reverse pattern
+ while
  when you write the reverse code like this:
  while(1)
  {
  if(somefunc())
  return;
  }
  this may should be :
  while(!somefunc())
  {} 


** Glory_Programing

*** mingw cross-compile
+ install mingw(32)
  - sudo apt-get install mingw32  (when i use mingw32 some header files like strsafe.h can't found)
  - then mingw exsist in /usr forlder
  - or you can install mingw-w64 
   sudo apt-get install mingw-w64 mingw-w64-common mingw-w64-i686-dev mingw-w64-tools mingw-w64-x86-64-dev

+ compile
  - i586-mingw32msvc-gcc hello/src/main.cpp -o hello/src/main.exe

  - or use cmake file.  [[file:~/Desktop/Toolchain-cross-mingw32-linux.cmake][cmake file]]  [[file:~/Desktop/WDoc/Glory_Programming/JZEY_Practice/hello/src/CMakeLists.txt][CMakeLists.txt]]

  - make windows dll used in CMakeLists.txt
#+BEGIN_SRC
# Allow the developer to select if Dynamic or Static libraries are built
OPTION (BUILD_SHARED_LIBS "Build Shared Libraries" ON)
# Set the LIB_TYPE variable to STATIC
SET (LIB_TYPE STATIC)
IF (BUILD_SHARED_LIBS)
  # User wants to build Dynamic Libraries, so change the LIB_TYPE variable to CMake keyword 'SHARED'
  SET (LIB_TYPE SHARED)
ENDIF (BUILD_SHARED_LIBS)

# Create a target for the library
ADD_LIBRARY(MyLibrary ${LIB_TYPE} ../src/dllmain.cpp)
ADD_EXECUTABLE(load ../src/LoadTest.cpp)
#+END_SRC
    
+ how to use cmake , and what's that
  CMake是一个跨平台的安装(编译)工具,可以用简单的语句来描述所有平台的安装(编译过程)。他能够输出各种各样的makefile或者project文件,能测试编译器所支持的C++特性,类似UNIX下的automake。

  - [[http://www.cmake.org/cmake/help/v2.8.8/cmake.html#module:GenerateExportHeader][cmake document]]

  - make clean

  - in-souce build & out-source build
    
+ build cross-compile environment (linux host for windows)
  + http://www.mingw.org/wiki/LinuxCrossMinGW

  + http://osix.net/modules/article/?id=670 start windows programing use mingw

+ inline intel syntax asm in c build with gcc
  1) 
   #+BEGIN_SRC
    __asm__
        (
            ".intel_syntax;"
            "int 0x3;"
         );

   #+END_SRC

   i586-mingw32msvc-gcc -masm=intel -o load.exe LoadTest.cpp
  2) or you can add_definitions(-masm=intel) in cmake file or cmakelists.txt then cmake & make

+ intrestring items
  - TlHelp32.h should be tlhelp32.h on linux crosscompile

  - mingw32-w32api

  - define _WIN32_IE 0x400 ?

  - sptrinf use header file <cstdio>

  - C++11 support in cmake file add_definitions(-std=gnu++0x)

*** Dynamic-Link library 

+  [[http://msdn.microsoft.com/en-us/library/windows/desktop/ms682596(v%3Dvs.85).aspx][msdn dynamic link libraries]]


** Glory_penetration


** Glory_VersionControl

*** github
+ git config --global user.name "jzey"
+ git config --global user.email "******"
+ git init
+ git status
+ git add jzey-pkm.org
+ git commit -m "init-version-of-pkm"
+ git pull
+ git push

如果不小心使用git rm 删除了文件,可以使用git reset --hard 恢复到最后的提交版本

git commit --amend  http://git-scm.com/book/zh/v1/Git-%E5%9F%BA%E7%A1%80-%E6%92%A4%E6%B6%88%E6%93%8D%E4%BD%9C

git rm --cached  remove file from version control

git config -l
git config remote.origin.url https://username:password@github.com/StGlolry/jzey-pkm.git   

git ls-files & git ls-tree -r master --name-only
view tracked files

https://github.com/github/gitignore  a collection of git ignore files
how to use git ignore https://help.github.com/articles/ignoring-files/


** Glory_ForeignLanguage

*** English

**** Vocabulary
- Note taken on [2015-02-09 Mon 15:32] \\
  游刃有余
  ITs capability.
  Practice makes perfect
  be quite capable of
- Note taken on [2015-02-09 Mon 15:27] \\
  处理己事，游刃有余，乃是智者。
  he is wise that has wit enough for his own affairs.
- Note taken on [2015-02-09 Mon 11:31] \\
       ambiguous
       adj.模棱两可的；含糊不清的
- Note taken on [2015-02-06 Fri 16:01] \\
  polymorphism
  多形性；多态性
- Note taken on [2015-02-06 Fri 15:52] \\
  circumvent
  vt.绕行；设法避开；围住
- Note taken on [2015-02-06 Fri 14:52] \\
  diagnostic
  adj.诊断的；特征的
- Note taken on [2015-01-07 Wed 20:07] \\
  mnemonic
  
  美 [nɪ'mɑnɪk] 
  英 [nɪ'mɒnɪk] 
  
  * adj.记忆的；记忆术的；增进记忆的
  * n.帮助记忆的词句（或诗歌等）；助记符号
  * 网络助记的；有助于记忆的；助记码
- Note taken on [2015-01-07 Wed 07:57] \\
  granularity
  
  美 [grænjʊ'lærɪtɪ] 
  英 [grænjʊ'lærɪtɪ] 
  
  * n.颗粒性
  * 网络粒度；颗粒度；封锁粒度
- Note taken on [2015-01-06 Tue 19:42] \\
  dedicate
  
  美 
  英 ['dedɪkeɪt] 
  
  * v.把…奉献给；（在书、音乐或作品的前部）题献词；为…举行奉献典礼
  * 网络献身；致力；致力于
- Note taken on [2014-12-30 Tue 07:26] \\
  irrespective
  
  美 [.ɪrɪ'spektɪv] 
  英 [.ɪrɪ'spektɪv] 
  
  * adj.不顾[不考虑,不问](…)的
  * 网络不顾的；不论；无关的
- Note taken on [2014-12-30 Tue 07:22] \\
  hoist
  
  美 [hɔɪst] 
  英 [hɔɪst] 
  
  * v.吊起；提升；拉高
  * n.起重机；吊车；(残疾人用)升降机
  * 网络升起；被吊起来；被击晕的情况下被吊起
- Note taken on [2014-12-30 Tue 07:02] \\
  synonym
  
  美 ['sɪnənɪm] 
  英 ['sɪnənɪm] 
  
  * n.同义词；【生】(同物)异名；〈口〉类似物；【生化】同义密码子
  * 网络同义字；数据库中所有同义词；同物异名
- Note taken on [2014-12-30 Tue 07:01] \\
  dialect
  
  美 ['daɪə.lekt] 
  英 ['daɪəlekt] 
  
  * n.方言；地方话；土话
  * 网络土语；语调；语支
- Note taken on [2014-12-30 Tue 06:57] \\
  autobiographer
  
  美 [ɔtoba'ɪɒɡrəfɚ] 
  英 [ɔ:təʊba'ɪɒɡrəfə] 
  
  * n.自传作者
  * 网络自传作家；自传作家的
- Note taken on [2014-12-30 Tue 06:55] \\
  badge
  
  美 [bædʒ] 
  英 [bædʒ] 
  
  * n.徽章；标记；象征
  * abbr.〈美(=Base Air Defense Ground Environment)【空】基地防空地面警备系统
  * 网络奖章；标志；小徽章
- Note taken on [2014-12-30 Tue 05:45] \\
  snoop
  
  美 [snʊp] 
  英 [snuːp] 
  
  * v.窥探；偷窥
  * n.窥视；打听别人秘密的人
  * 网络探听；史努比；史奴比
- Note taken on [2014-12-30 Tue 05:42] \\
  synchronization
  
  美 [ˌsɪŋkrənaɪ'zeɪʃ(ə)n] 
  英 [ˌsɪŋkrənaɪ'zeɪʃ(ə)n] 
  
  * n.同时；同时性；【物】同步；【影视】同期[步]录音
  * 网络同步化；同步控制；同步性
- Note taken on [2014-12-30 Tue 02:18] \\
  discrete
  * adj.分离的；互不相连的；各别的
  * 网络离散的；不连续的；分立的
- Note taken on [2014-12-29 Mon 00:40] \\
  squelch
  * n.压制；压碎；〈口〉压倒对方的议论[回答]；反驳得对方不再作声
  * v.发扑哧声（如走在泥泞中似的）；制止；压制；遏制
  * 网络静噪；镇压；静音
- Note taken on [2014-12-26 Fri 00:18] \\
  reception
  * n.接待；招待会；欢迎；欢迎会
  * 网络接待处；接收；接受
- Note taken on [2014-12-25 Thu 23:25] \\
  instantiate
  * v.用具体例证说明
  * 网络实例化；具现化；例示
    